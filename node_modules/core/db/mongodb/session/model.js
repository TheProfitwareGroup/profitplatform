var
    options = require('options'),
    db = require('mongoose'),
    Schema = db.Schema,
    ObjectId = Schema.ObjectId;

var sessionDescription = {
    SESSION_OPEN: 0,
    SESSION_CLOS: 1,
    lifeTime: options.sessionLifetime * 1000
};

var sessionModel;

sessionDescription.sessionSchema = new Schema({
    id: ObjectId,
    session: { type: String },
    user: [require('../user/model.js').description.usersSchema],
    state: { type: Number, min: sessionDescription.SESSION_OPEN, max: sessionDescription.SESSION_CLOS },
    date: { type: Date, default: Date.now },
    username: { type: String },
    password: { type: String },
    needrelogin: { type: Boolean }
});

db.model('sessionModel', sessionDescription.sessionSchema);
sessionModel = db.model('sessionModel');

module.exports = exports = {
    description: sessionDescription,
    model: sessionModel
};