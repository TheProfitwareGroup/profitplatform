module.exports = exports = function(i, params, result) {
	i.l.trace('core.db.mongodb.user.add', 'Adduser: ' + JSON.stringify(params));
    model = i.model;
    model.where('login').in([params.login]).remove(function(){
        model = new i.model(params);
        model.save(function(err){
            if(err) {
                i.l.trace('core.db.mongodb.user.add', err);
                result('Cannot create user', null);
            } else {
                i.l.trace('core.db.mongodb.user.add', 'User saved');
                result(null, 'success');   
            }
        });    
    });
};