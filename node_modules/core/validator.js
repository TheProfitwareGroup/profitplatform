var debug = require('options.js').debug,
	path = require('path');

/**
 * Checks schema availability by method name and apikey
 * 
 * @param {String} method
 * @param {String} apikey
 * @return {Boolean}
 * @api public
 */

var checkSchemaAvailability = function(methodname, apikey){
    var schemaArray = methodname.split('.'),
        valid = true,
        schema = path.normalize('../schema');
    schemaArray.forEach(function(n){
        valid = valid && new RegExp('[a-z0-9]{2,12}').test(n);   
        schema = path.join(schema, n);
    });
    schema += '.js';
    if(!valid)
        return false;
    try{
        var x = require(schema).main;
    }catch(e){
    	console.log(e);
        return false;   
    }
    return true; // TODO : Check API KEY
};

exports.checkSchemaAvailability = checkSchemaAvailability;