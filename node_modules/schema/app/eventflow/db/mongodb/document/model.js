var
    access = require('core/access.js'),
    db = require('mongoose'),
    Schema = db.Schema,
    ObjectId = Schema.ObjectId;

/**
 * DBSchema describing twitter cache
 *
 *      - content - cache content
 *      - date - last update date
 *
 */

var eventflow_documentDescription = {};

var eventflow_documentModel;

eventflow_documentDescription.eventflow_documentSchema = new Schema({
    id: ObjectId,
    ref: {
        type: String,
        match: /[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}/,
    },
    status: { type: String },
    doctype: { type: String },
    history: { type: JSON },
    date_ts: { type: Date },
    document: { type: JSON },
    sysid: { type: String }
});

db.model('eventflow_documentModel', eventflow_documentDescription.eventflow_documentSchema);
eventflow_documentModel = db.model('eventflow_documentModel');

module.exports = exports = {
    description: eventflow_documentDescription,
    model: eventflow_documentModel
};