module.exports = exports = function(i, params, result) {
	model = i.model;
    model.where('sysid', params.sysid).findOne(function(err, obj){
    	if(err||(obj===undefined)||(obj==null)){
    		result(err, []);
    	} else {
    		var ret = [];
    		obj.doctype.forEach(function(doctype){
    			ret.push({ name : doctype.name, 
    				description : doctype.description, 
    				fields : doctype.fields,
    				dispatcher : doctype.dispatcher });
    		});
    		result(null, ret);
    	}
    });
};