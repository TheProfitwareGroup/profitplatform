var schema = require('core/schema.js').initme(__filename),
	db = require('core/db.js'),
    jsonrpc = require('core/jsonrpc.js'),
    Sync = require('sync');

var main = {};

/**
 * Schema: [app.eventflow.web]platform.session.find
 * 
 * Returns all sessions
 * 
 * @return {Object}
 */
 
main[schema] = function(apikey, result) {
	Sync(function(){
		try{
			return db.emit.sync(db, 'schema', 'session.findAll', {});
		}catch(e){
			throw new Error(jsonrpc.DATABASE_ERROR);
		}
	}, result);
};

exports.main = main;