var schema = require('core/schema.js').initme(__filename),
	db = require('core/db.js'),
    jsonrpc = require('core/jsonrpc.js'),
    Sync = require('sync');

var main = {};

/**
 * Schema: [app.slovarushka]word.find
 * 
 * Returns words list
 * 
 * @return {Object}
 */
 
main[schema] = function(apikey, result) {
	Sync(function(){
		try{
			return db.emit.sync(db, 'schema', '[app.slovarushka]word.find', {});
		}catch(e){
			throw new Error(jsonrpc.DATABASE_ERROR);
		}
	}, result);
};

exports.main = main;
exports.install = function(installInfo){
	installInfo.slovarushkaWords.forEach(function(word){
		try{
			db.emit.future(db, 'schema', '[app.slovarushka]word.add', word);
		}catch(e){}
	});
}.async();