var schema = require('core/schema.js').initme(__filename);
var db = require('core/db.js'),
    jsonrpc = require('core/jsonrpc.js');

var main = {};

/**
 * Schema: platform.common.deletesession
 * 
 * Returns platform options
 * 
 * @return {Object}
 */
 
main[schema] = function(apikey, result) {
    db.emit('schema', 'session.find', { session : apikey }, function(err, obj){
        if(err||obj===null)
            result(jsonrpc.INVALID_APIKEY);
        else{
            db.emit('schema', 'session.delete', { session : apikey }, function(err, obj){
                result(null, "success");
            });
        }
    });
};

exports.main = main;