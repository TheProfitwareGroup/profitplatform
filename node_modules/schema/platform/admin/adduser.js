/**
 * Module dependencies
 */

var options = require('options.js');
var schema = require('core/schema.js').initme(__filename);
var utils = require('connect').utils,
    assert = require('assert'),
    jsonrpc = require('core/jsonrpc.js'),
    db = require('core/db.js');

var main = {};

/**
 * Schema: platform.admin.adduser
 * 
 * Creates user by username and password
 * 
 * @param {String} user
 * @param {String} password
 * @return {Object}
 * @api public
 */

main[schema] = function(apikey, uDescription, result) {
    try {
        db.emit('schema', 'user.add', uDescription, function(err, obj){
            if(err)
                result(jsonrpc.DATABASE_ERROR);
            else
                result(null, obj);
        });
    } catch(e) {
        result(jsonrpc.INVALID_REQUEST);
    }  
};

exports.main = main;