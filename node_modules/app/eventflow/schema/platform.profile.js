var
	Sync = require('sync'),
	rpc = require('core/rpc');

var schema = function(params) {
	var
		appsrv = params.appsrv,
		pageStructure = params.pageStructure,
		parsedUrl = params.parsedUrl,
		sess = params.sess;
	pageStructure.pFind('platform.profile').user = sess.user;
	pageStructure.pFind('leftmenu').menu
		.find('title', 'ProfitPlatform').menu
		.find('href', '#platform.profile').active = true;
	pageStructure.pFind('content').content = appsrv.page.sync(appsrv, 
			'platform.profile', pageStructure.pFind('platform.profile'));
	return pageStructure;
}.async();

module.exports = exports = schema;