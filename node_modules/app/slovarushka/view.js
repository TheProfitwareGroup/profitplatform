var
	Sync = require('sync'),
	rpc = require('core/rpc.js');

var main = function(sess) {
	if( sess.defaultPageStructure === undefined )
		sess.defaultPageStructure = rpc.local.sync(rpc, 'app.slovarushka.page.find', ['']);
	return JSON.parse(JSON.stringify(sess.defaultPageStructure));
}.async();

var words = function(sess) {
	if( sess.defaultWordStructure === undefined )
		sess.defaultWordStructure = {
			page : 'words',
			vars : {
				words : rpc.local.sync(rpc, 'app.slovarushka.word.find', [''])
			}
		};
	return JSON.parse(JSON.stringify(sess.defaultWordStructure));
}.async();

var blog = function(sess) {
	if( sess.defaultBlogStructure === undefined )
		sess.defaultBlogStructure = rpc.local.sync(rpc, 'app.slovarushka.blog.find', ['']);
	return JSON.parse(JSON.stringify(sess.defaultBlogStructure));
}.async();

module.exports = exports = {
		main : main,
		words : words,
		blog : blog
};